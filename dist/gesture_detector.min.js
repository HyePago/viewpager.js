!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var o;"undefined"!=typeof window?o=window:"undefined"!=typeof global?o=global:"undefined"!=typeof self&&(o=self),o.GestureDetector=e()}}(function(){return function e(o,n,r){function t(f,a){if(!n[f]){if(!o[f]){var c="function"==typeof require&&require;if(!a&&c)return c(f,!0);if(i)return i(f,!0);throw new Error("Cannot find module '"+f+"'")}var s=n[f]={exports:{}};o[f][0].call(s.exports,function(e){var n=o[f][1][e];return t(n?n:e)},s,s.exports,e,o,n,r)}return n[f].exports}for(var i="function"==typeof require&&require,f=0;f<r.length;f++)t(r[f]);return t}({1:[function(e,o){"use strict";o.exports={add:function(e,o,n,r){var t,i;for(o instanceof Array||(o=[o]),t=0,i=o.length;i>t;t+=1)e.addEventListener(o[t],n,!!r)},remove:function(e,o,n,r){var t,i;for(o instanceof Array||(o=[o]),t=0,i=o.length;i>t;t+=1)e.removeEventListener(o[t],n,!!r)}}},{}],2:[function(e,o){"use strict";function n(o,n){function r(e){if(f){var o=e.touches.length?e.touches:e.changedTouches;return{x:o[0].pageX,y:o[0].pageY,timestamp:e.timeStamp}}return{x:e.pageX,y:e.pageY,timestamp:e.timeStamp}}var t,i,f="ontouchstart"in window,a=f?"touchstart":"mousedown",c=f?"touchmove":"mousemove",s=f?["touchend","touchcancel"]:["mouseup","mousecancel"],u=e("./events"),v=new(e("./velocity_tracker")),d=window,l=!1,m=!1,p=function(){},y=n.onUp||p,g=n.onUp||p,h=n.onDrag||p,w=n.onFirstDrag||p,x=n.onFling||p,C={handleEvent:function(e){switch(e.type){case"mousedown":case"touchstart":this.onDown(e);break;case"mousemove":case"touchmove":this.onMove(e);break;case"mouseup":case"touchend":this.onUp(e)}},onDown:function(e){l=!0,m=!0;var o=r(e);t=o,i=o,v.clear(),v.addMovement(o),y(e)},onMove:function(e){var o=r(e);if(l){v.addMovement(o);var n={x:o.x,y:o.y,dx:o.x-i.x,dy:o.y-i.y,timestamp:o.timestamp,down_point:t,m_prev_point:i,event:e};m&&(w(n),m=!1),h(n),i=o}return!1},onUp:function(e){var o=r(e);if(l){l=!1,i=void 0;var n=v.getVelocity();x(o,n)}g()}};return u.add(o,a,C),u.add(d,c,C),u.add(d,s,C),{stop:function(){u.remove(o,a,C),u.remove(d,c,C),u.remove(d,s,C)},getVelocityTracker:function(){return v}}}o.exports=n},{"./events":1,"./velocity_tracker":3}],3:[function(e,o){"use strict";function n(){function e(){return{MAX_DEGREE:4,time:0,xCoeff:new Array(5),yCoeff:new Array(5),degree:2,confidence:0,clear:function(){this.time=0,this.degree=0,this.confidence=0;for(var e=0;e<=this.MAX_DEGREE;e++)this.xCoeff[e]=0,this.yCoeff[e]=0}}}function o(e){console.log(JSON.stringify(e))}function n(e,o){for(var n=0,r=e.length;r--;)n+=e[r]*o[r];return n}function r(e){for(var o=0,n=e.length;n--;)o+=e[n]*e[n];return Math.sqrt(o)}function t(e,o){for(var n=new Array(e),r=0;e>r;r++)n[r]=new Array(o);return n}function i(){v=0,u[0]=void 0}function f(e,i,f,a,c,s,u){var v,d,l;y&&console.log("solveLeastSquares: ","m => ",a,"n => ",c,"x => ",e,"y => ",i,"w => ",f,"outB =>",s,"outDet =>",u);var m=t(c,a);for(v=0;a>v;v++)for(m[0][v]=f[v],d=1;c>d;d++)m[d][v]=m[d-1][v]*e[v];y&&o({a:m});var p=t(c,a),g=t(c,c);for(l=0;c>l;l++){for(v=0;a>v;v++)p[l][v]=m[l][v];for(d=0;l>d;d++){var h=n(p[l],p[d]);for(v=0;a>v;v++)p[l][v]-=h*p[d][v]}var w=r(p[l],a);if(y&&(o({q:p}),console.log("norm",w,a,p[l][0])),1e-6>w)return y&&console.log("  - no solution, norm=%f",w),!1;var x=1/w;for(v=0;a>v;v++)p[l][v]*=x;for(d=0;c>d;d++)g[l][d]=l>d?0:n(p[l],m[d])}if(y){console.log("  - q=> ",p[0][0]),console.log("  - r=> ",g[0][0]);var C=t(c,a);for(v=0;a>v;v++)for(d=0;c>d;d++)for(C[d][v]=0,l=0;c>l;l++)C[d][v]+=p[l][v]*g[l][d];console.log("  - qr=%s",C[0][0])}var A=new Array(a);for(v=0;a>v;v++)A[v]=i[v]*f[v];for(d=c;0!==d--;){for(s[d]=n(p[d],A,a),l=c-1;l>d;l--)s[d]-=g[d][l]*s[l];s[d]/=g[d][d]}y&&console.log("  - b=%s",s);var b=0;for(v=0;a>v;v++)b+=i[v];b/=a;var E=0,q=0;for(v=0;a>v;v++){var k=i[v]-s[0],D=1;for(d=1;c>d;d++)D*=e[v],k-=D*s[d];E+=f[v]*f[v]*k*k;var M=i[v]-b;q+=f[v]*f[v]*M*M}return u.confidence=q>1e-6?1-E/q:1,y&&console.log("  - sserr => ",E,"  - sstot => ",q,"  - det => ",u),!0}function a(){return 1}function c(e){d.clear();var o=new Array(m),n=new Array(m),r=new Array(m),t=new Array(m),i=0,c=v,s=u[v];if(void 0===s)return!1;do{var l=u[c];if(!l)break;var g=s.timestamp-l.timestamp;if(g>p)break;o[i]=l.x,n[i]=l.y,r[i]=a(c),t[i]=-g,c=(0===c?m:c)-1}while(++i<m);if(0===i)return console.log("no data to estimate"),!1;if(e>i-1&&(e=i-1),e>=1){var h={confidence:0},w={confidence:0},x=e+1;if(f(t,o,r,i,x,d.xCoeff,h)&&f(t,n,r,i,x,d.yCoeff,w))return d.time=s.timestamp,d.degree=e,d.confidence=h.confidence*w.confidence,y&&console.log("Estimate: ","degree",d.degree,"xCoeff",d.xCoeff,"yCoeff",d.yCoeff,"confidence",d.confidence),!0}return y&&console.log("velocity data available for this pointer, but we do have its current position."),d.xCoeff[0]=o[0],d.yCoeff[0]=n[0],d.time=s.timestamp,d.degree=0,d.confidence=1,!0}var s=0,u=new Array(m),v=0,d=new e,l=40,m=5,p=200,y=!1;return{clear:i,getVelocity:function(){return c(2)&&d.degree>=1?{unit:"px / ms",vx:d.xCoeff[1],vy:d.yCoeff[1]}:{info:"no velo",unit:"px / ms",vx:0,vy:0}},getPositions:function(){var e=0,o=v,n=[];do{var r=u[o];if(!r)break;n.push(r),o=(0===o?m:o)-1}while(++e<m);return n},addMovement:function(e){e.timestamp>=s+l&&(y&&console.log("no movements assume stop"),i()),s=e.timestamp,++v===m&&(v=0),u[v]=e}}}o.exports=n},{}]},{},[2])(2)});