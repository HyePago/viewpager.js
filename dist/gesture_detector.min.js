!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var o;"undefined"!=typeof window?o=window:"undefined"!=typeof global?o=global:"undefined"!=typeof self&&(o=self),o.GestureDetector=e()}}(function(){return function e(o,n,t){function r(f,a){if(!n[f]){if(!o[f]){var c="function"==typeof require&&require;if(!a&&c)return c(f,!0);if(i)return i(f,!0);throw new Error("Cannot find module '"+f+"'")}var u=n[f]={exports:{}};o[f][0].call(u.exports,function(e){var n=o[f][1][e];return r(n?n:e)},u,u.exports,e,o,n,t)}return n[f].exports}for(var i="function"==typeof require&&require,f=0;f<t.length;f++)r(t[f]);return r}({1:[function(e,o){"use strict";o.exports={add:function(e,o,n,t){var r,i;for(o instanceof Array||(o=[o]),r=0,i=o.length;i>r;r+=1)e.addEventListener(o[r],n,!!t)},remove:function(e,o,n,t){var r,i;for(o instanceof Array||(o=[o]),r=0,i=o.length;i>r;r+=1)e.removeEventListener(o[r],n,!!t)}}},{}],2:[function(e,o){"use strict";function n(o,n){function t(e){if(a){var o=e.touches.length?e.touches:e.changedTouches;return{x:o[0].pageX,y:o[0].pageY,timestamp:e.timeStamp,e:e}}return{x:e.pageX,y:e.pageY,timestamp:e.timeStamp,e:e}}function r(e){return{x:e.x,y:e.y,dx:e.x-f.x,dy:e.y-f.y,totaldx:e.x-i.x,totaldy:e.y-i.y,timestamp:e.timestamp,down_point:i,m_prev_point:f,event:e.e}}var i,f,a="ontouchstart"in window,c=a?"touchstart":"mousedown",u=a?"touchmove":"mousemove",s=a?["touchend","touchcancel"]:["mouseup","mousecancel"],v=e("./events"),d=new(e("./velocity_tracker")),l=window,m=!1,p=!1,y=function(){},g=n.onUp||y,h=n.onUp||y,w=n.onDrag||y,x=n.onFirstDrag||y,C=n.onFling||y,A={handleEvent:function(e){switch(e.type){case"mousedown":case"touchstart":this.onDown(e);break;case"mousemove":case"touchmove":this.onMove(e);break;case"mouseup":case"touchend":this.onUp(e)}},onDown:function(e){m=!0,p=!0;var o=t(e);i=o,f=o,d.clear(),d.addMovement(o),g(e)},onMove:function(e){if(m){var o=t(e);d.addMovement(o);var n=r(o);p&&(x(n),p=!1),w(n),f=o}return!1},onUp:function(e){if(m){var o=t(e),n=r(o);if(m){m=!1,f=void 0;var i=d.getVelocity();C(n,i)}h()}}};return v.add(o,c,A),v.add(l,u,A),v.add(l,s,A),{stop:function(){v.remove(o,c,A),v.remove(l,u,A),v.remove(l,s,A)},isDragging:function(){return m},getVelocityTracker:function(){return d}}}o.exports=n},{"./events":1,"./velocity_tracker":3}],3:[function(e,o){"use strict";function n(){function e(){return{MAX_DEGREE:4,time:0,xCoeff:new Array(5),yCoeff:new Array(5),degree:2,confidence:0,clear:function(){this.time=0,this.degree=0,this.confidence=0;for(var e=0;e<=this.MAX_DEGREE;e++)this.xCoeff[e]=0,this.yCoeff[e]=0}}}function o(e){console.log(JSON.stringify(e))}function n(e,o){for(var n=0,t=e.length;t--;)n+=e[t]*o[t];return n}function t(e){for(var o=0,n=e.length;n--;)o+=e[n]*e[n];return Math.sqrt(o)}function r(e,o){for(var n=new Array(e),t=0;e>t;t++)n[t]=new Array(o);return n}function i(){v=0,s[0]=void 0}function f(e,i,f,a,c,u,s){var v,d,l;y&&console.log("solveLeastSquares: ","m => ",a,"n => ",c,"x => ",e,"y => ",i,"w => ",f,"outB =>",u,"outDet =>",s);var m=r(c,a);for(v=0;a>v;v++)for(m[0][v]=f[v],d=1;c>d;d++)m[d][v]=m[d-1][v]*e[v];y&&o({a:m});var p=r(c,a),g=r(c,c);for(l=0;c>l;l++){for(v=0;a>v;v++)p[l][v]=m[l][v];for(d=0;l>d;d++){var h=n(p[l],p[d]);for(v=0;a>v;v++)p[l][v]-=h*p[d][v]}var w=t(p[l],a);if(y&&(o({q:p}),console.log("norm",w,a,p[l][0])),1e-6>w)return y&&console.log("  - no solution, norm=%f",w),!1;var x=1/w;for(v=0;a>v;v++)p[l][v]*=x;for(d=0;c>d;d++)g[l][d]=l>d?0:n(p[l],m[d])}if(y){console.log("  - q=> ",p[0][0]),console.log("  - r=> ",g[0][0]);var C=r(c,a);for(v=0;a>v;v++)for(d=0;c>d;d++)for(C[d][v]=0,l=0;c>l;l++)C[d][v]+=p[l][v]*g[l][d];console.log("  - qr=%s",C[0][0])}var A=new Array(a);for(v=0;a>v;v++)A[v]=i[v]*f[v];for(d=c;0!==d--;){for(u[d]=n(p[d],A,a),l=c-1;l>d;l--)u[d]-=g[d][l]*u[l];u[d]/=g[d][d]}y&&console.log("  - b=%s",u);var b=0;for(v=0;a>v;v++)b+=i[v];b/=a;var E=0,q=0;for(v=0;a>v;v++){var D=i[v]-u[0],k=1;for(d=1;c>d;d++)k*=e[v],D-=k*u[d];E+=f[v]*f[v]*D*D;var M=i[v]-b;q+=f[v]*f[v]*M*M}return s.confidence=q>1e-6?1-E/q:1,y&&console.log("  - sserr => ",E,"  - sstot => ",q,"  - det => ",s),!0}function a(){return 1}function c(e){d.clear();var o=new Array(m),n=new Array(m),t=new Array(m),r=new Array(m),i=0,c=v,u=s[v];if(void 0===u)return!1;do{var l=s[c];if(!l)break;var g=u.timestamp-l.timestamp;if(g>p)break;o[i]=l.x,n[i]=l.y,t[i]=a(c),r[i]=-g,c=(0===c?m:c)-1}while(++i<m);if(0===i)return console.log("no data to estimate"),!1;if(e>i-1&&(e=i-1),e>=1){var h={confidence:0},w={confidence:0},x=e+1;if(f(r,o,t,i,x,d.xCoeff,h)&&f(r,n,t,i,x,d.yCoeff,w))return d.time=u.timestamp,d.degree=e,d.confidence=h.confidence*w.confidence,y&&console.log("Estimate: ","degree",d.degree,"xCoeff",d.xCoeff,"yCoeff",d.yCoeff,"confidence",d.confidence),!0}return y&&console.log("velocity data available for this pointer, but we do have its current position."),d.xCoeff[0]=o[0],d.yCoeff[0]=n[0],d.time=u.timestamp,d.degree=0,d.confidence=1,!0}var u=0,s=new Array(m),v=0,d=new e,l=40,m=5,p=200,y=!1;return{clear:i,getVelocity:function(){return c(2)&&d.degree>=1?{unit:"px / ms",vx:d.xCoeff[1],vy:d.yCoeff[1]}:{info:"no velo",unit:"px / ms",vx:0,vy:0}},getPositions:function(){var e=0,o=v,n=[];do{var t=s[o];if(!t)break;n.push(t),o=(0===o?m:o)-1}while(++e<m);return n},addMovement:function(e){e.timestamp>=u+l&&(y&&console.log("no movements assume stop"),i()),u=e.timestamp,++v===m&&(v=0),s[v]=e}}}o.exports=n},{}]},{},[2])(2)});