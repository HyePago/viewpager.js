!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var o;"undefined"!=typeof window?o=window:"undefined"!=typeof global?o=global:"undefined"!=typeof self&&(o=self),o.GestureDetector=e()}}(function(){return function e(o,n,r){function t(f,a){if(!n[f]){if(!o[f]){var c="function"==typeof require&&require;if(!a&&c)return c(f,!0);if(i)return i(f,!0);throw new Error("Cannot find module '"+f+"'")}var u=n[f]={exports:{}};o[f][0].call(u.exports,function(e){var n=o[f][1][e];return t(n?n:e)},u,u.exports,e,o,n,r)}return n[f].exports}for(var i="function"==typeof require&&require,f=0;f<r.length;f++)t(r[f]);return t}({1:[function(e,o){"use strict";o.exports={add:function(e,o,n,r){var t,i;for(o instanceof Array||(o=[o]),t=0,i=o.length;i>t;t+=1)e.addEventListener(o[t],n,!!r)},remove:function(e,o,n,r){var t,i;for(o instanceof Array||(o=[o]),t=0,i=o.length;i>t;t+=1)e.removeEventListener(o[t],n,!!r)}}},{}],2:[function(e,o){"use strict";function n(o,n){function r(e){if(u){var o=e.touches.length?e.touches:e.changedTouches;return{x:o[0].pageX,y:o[0].pageY,timestamp:e.timeStamp,e:e}}return{x:e.pageX,y:e.pageY,timestamp:e.timeStamp,e:e}}function t(e){return{x:e.x,y:e.y,dx:e.x-f.x,dy:e.y-f.y,totaldx:e.x-i.x,totaldy:e.y-i.y,timestamp:e.timestamp,downPoint:i,mPrevPoint:f,event:e.e}}var i,f,a=e("./events"),c=e("./velocity_tracker"),u="ontouchstart"in window,s=u?"touchstart":"mousedown",v=u?"touchmove":"mousemove",d=u?["touchend","touchcancel"]:["mouseup","mousecancel"],l=new c,m=window,y=!1,p=!1,g=function(){},h=n.onUp||g,w=n.onUp||g,x=n.onDrag||g,C=n.onFirstDrag||g,A=n.onFling||g,b={handleEvent:function(e){switch(e.type){case"mousedown":case"touchstart":this.onDown(e);break;case"mousemove":case"touchmove":this.onMove(e);break;case"mouseup":case"touchend":this.onUp(e)}},onDown:function(e){y=!0,p=!0;var o=r(e);i=o,f=o,l.clear(),l.addMovement(o),h(e)},onMove:function(e){if(y){var o=r(e);l.addMovement(o);var n=t(o);p&&(C(n),p=!1),x(n),f=o}return!1},onUp:function(e){if(y){var o=r(e),n=t(o);if(y){y=!1,f=void 0;var i=l.getVelocity();A(n,i)}w()}}};return a.add(o,s,b),a.add(m,v,b),a.add(m,d,b),{destroy:function(){a.remove(o,s,b),a.remove(m,v,b),a.remove(m,d,b)},isDragging:function(){return y},getVelocityTracker:function(){return l}}}o.exports=n},{"./events":1,"./velocity_tracker":3}],3:[function(e,o){"use strict";function n(){function e(){return{MAX_DEGREE:4,time:0,xCoeff:new Array(5),yCoeff:new Array(5),degree:2,confidence:0,clear:function(){this.time=0,this.degree=0,this.confidence=0;for(var e=0;e<=this.MAX_DEGREE;e++)this.xCoeff[e]=0,this.yCoeff[e]=0}}}function o(e){console.log(JSON.stringify(e))}function n(e,o){for(var n=0,r=e.length;r--;)n+=e[r]*o[r];return n}function r(e){for(var o=0,n=e.length;n--;)o+=e[n]*e[n];return Math.sqrt(o)}function t(e,o){for(var n=new Array(e),r=0;e>r;r++)n[r]=new Array(o);return n}function i(){y=0,l[0]=void 0}function f(e,i,f,a,c,u,s){var v,l,m;d&&console.log("solveLeastSquares: ","m => ",a,"n => ",c,"x => ",e,"y => ",i,"w => ",f,"outB =>",u,"outDet =>",s);var y=t(c,a);for(v=0;a>v;v++)for(y[0][v]=f[v],l=1;c>l;l++)y[l][v]=y[l-1][v]*e[v];d&&o({a:y});var p=t(c,a),g=t(c,c);for(m=0;c>m;m++){for(v=0;a>v;v++)p[m][v]=y[m][v];for(l=0;m>l;l++){var h=n(p[m],p[l]);for(v=0;a>v;v++)p[m][v]-=h*p[l][v]}var w=r(p[m],a);if(d&&(o({q:p}),console.log("norm",w,a,p[m][0])),1e-6>w)return d&&console.log("  - no solution, norm=%f",w),!1;var x=1/w;for(v=0;a>v;v++)p[m][v]*=x;for(l=0;c>l;l++)g[m][l]=m>l?0:n(p[m],y[l])}if(d){console.log("  - q=> ",p[0][0]),console.log("  - r=> ",g[0][0]);var C=t(c,a);for(v=0;a>v;v++)for(l=0;c>l;l++)for(C[l][v]=0,m=0;c>m;m++)C[l][v]+=p[m][v]*g[m][l];console.log("  - qr=%s",C[0][0])}var A=new Array(a);for(v=0;a>v;v++)A[v]=i[v]*f[v];for(l=c;0!==l--;){for(u[l]=n(p[l],A,a),m=c-1;m>l;m--)u[l]-=g[l][m]*u[m];u[l]/=g[l][l]}d&&console.log("  - b=%s",u);var b=0;for(v=0;a>v;v++)b+=i[v];b/=a;var E=0,q=0;for(v=0;a>v;v++){var D=i[v]-u[0],k=1;for(l=1;c>l;l++)k*=e[v],D-=k*u[l];E+=f[v]*f[v]*D*D;var M=i[v]-b;q+=f[v]*f[v]*M*M}return s.confidence=q>1e-6?1-E/q:1,d&&console.log("  - sserr => ",E,"  - sstot => ",q,"  - det => ",s),!0}function a(){return 1}function c(e){p.clear();var o=new Array(s),n=new Array(s),r=new Array(s),t=new Array(s),i=0,c=y,u=l[y];if(void 0===u)return!1;do{var m=l[c];if(!m)break;var g=u.timestamp-m.timestamp;if(g>v)break;o[i]=m.x,n[i]=m.y,r[i]=a(c),t[i]=-g,c=(0===c?s:c)-1}while(++i<s);if(0===i)return console.log("no data to estimate"),!1;if(e>i-1&&(e=i-1),e>=1){var h={confidence:0},w={confidence:0},x=e+1;if(f(t,o,r,i,x,p.xCoeff,h)&&f(t,n,r,i,x,p.yCoeff,w))return p.time=u.timestamp,p.degree=e,p.confidence=h.confidence*w.confidence,d&&console.log("Estimate: ","degree",p.degree,"xCoeff",p.xCoeff,"yCoeff",p.yCoeff,"confidence",p.confidence),!0}return d&&console.log("velocity data available for this pointer, but we do have its current position."),p.xCoeff[0]=o[0],p.yCoeff[0]=n[0],p.time=u.timestamp,p.degree=0,p.confidence=1,!0}var u=40,s=5,v=200,d=!1,l=new Array(s),m=0,y=0,p=new e;return{clear:i,getVelocity:function(){return c(2)&&p.degree>=1?{unit:"px / ms",vx:p.xCoeff[1],vy:p.yCoeff[1]}:{info:"no velo",unit:"px / ms",vx:0,vy:0}},getPositions:function(){var e=0,o=y,n=[];do{var r=l[o];if(!r)break;n.push(r),o=(0===o?s:o)-1}while(++e<s);return n},addMovement:function(e){e.timestamp>=m+u&&(d&&console.log("no movements assume stop"),i()),m=e.timestamp,++y===s&&(y=0),l[y]=e}}}o.exports=n},{}]},{},[2])(2)});